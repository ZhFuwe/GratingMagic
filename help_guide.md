# GratingMagic 操作指南 (v1.1)


欢迎使用 GratingMagic！这是一款操作简单、功能强大的光栅卡制作工具，轻松将多张图像合成为一张可用于打印的、具有动态效果的光栅图像。

项目地址 - Github: https://github.com/ZhFuwe/GratingMagic

软件版本: v2.0.x

贡献者: @ZhFuwe

本软件使用 `Apache-2.0` 协议开源。

---

### 目录

    
1. **界面概览**
    
2. **参数/功能说明**
    
    - 2.1 图像管理
        
    - 2.2 合成参数设置
        
    - 2.3 打印参数设置

    - 2.4 打印参数设置
    
3. **操作示例**
    
4. **常见问题解答 (FAQ)**

---

### 1. 界面概览

- **A - 预览区**: 显示实时合成的光栅图像效果。您在此处看到的是最终成品的水印版本。
- **B - 图像管理**: 导入、排序和删除您的源图像（动画的每一帧）。
- **C - 参数设置**: 设置光栅合成的基础技术参数、控制最终打印品的物理尺寸。
- **D - 生成操作**: 完成所有设置后，从这里导出最终的高清光栅图像。

---

### 2. 参数/功能说明

#### 2.1 图像管理

- **导入图像**: 按住`ctrl`键一次性选择并导入多张图片。所有导入的图片会自动缓存到内存中。
- **图像列表**:
    - 显示了所有帧的顺序、缩略图和文件名。
    - **单击**列表中的某一项来选中它。
    - 按住`Ctrl`并单击，可以选择多个不连续的项。
- **上移/下移**: 用于调整动画帧的播放顺序，必须**只选中一项**时才可用。
- **删除**: 可以选中一项或多项进行删除。

#### 2.2 合成参数设置

- **切分方向**:
    - **纵向切分**: 光栅条纹是垂直的，左右晃动光栅卡时看到动画效果。希望制作具有深度感的3D图像，或是流畅的动画时，需要纵向切分。
    - **横向切分**: 光栅条纹是水平的，上下晃动光栅卡时看到动画效果。希望光栅卡呈现完全不同图像时，一般使用横向切分。
- **切片宽度(像素)**: 指**从每一帧图像中切下的条带的像素宽度**。例如，设为4，意味着程序会从第一张图取4像素宽的条带，再从第二张图取4像素宽的条带，以此类推，将它们拼接起来。
- **输出尺寸(像素)**: 最终输出光栅图的大小，由程序自动计算。

#### 2.3 打印参数设置

- **光栅板实际LPI**: 购买的物理光栅板的规格，家庭打印机一般选购`70`及以下的光栅版。
- **打印机校准LPI**: 通过打印LPI测试图，在光栅板下观察得到的、效果最佳的那个LPI值，一般与光栅版LPI有微小差异。测试方法见后文。
- **打印宽度 (厘米)**:
    - **作用**: 如果希望指定最终打印出来的实体卡片的尺寸，请在此处输入其宽度值。
        
    - **效果**: 输入数值并按回车或将焦点移开后，程序会自动计算出为了达到此物理尺寸所需要的像素尺寸，并弹窗询问您是否将图像缩放到该像素尺寸。
        
    - **设为**: 如果不关心物理尺寸，或想撤销之前的缩放操作，请点击一旁的【重置】按钮，图像尺寸将恢复，物理尺寸将改为自动计算。

#### 2.4 生成和保存

- 完成设置后，点击【生成并保存图像...】，程序将弹窗请求确认最终参数。
- 如果需要生成超大尺寸图像，请提前保存其他应用正在进行的工作，生成时间取决于设备性能。

---

### 3. 操作示例

假如需要制作一张15厘米宽的实体卡片：

1. 导入所有图像。
2. 调整顺序。
3. 设置“切分方向”和“切片宽度”。
4. 在“打印参数设置”中，输入准确的LPI值。
5. 在“期望的打印尺寸”输入框中，输入`15.00`，然后按回车。
6. 程序会弹出对话框，告诉您图像将被缩放到例如 `12345` 像素宽，确认修改。
7. 最后，点击【生成并保存图像...】，选择路径并保存。

---

### 4. 常见问题解答 (FAQ)

- **问：如何测试打印机LPI？**
- **答**：
        1. 下载LPI测试图包 https://github.com/ZhFuwe/GratingMagic/releases/download/v1.4.2/LPI-PrintTest.zip
        2. 找到对应你的光栅卡实际LPI的测试图，将其导入任意排版软件并放大到整张A4纸大小(21x29.7cm)，必须确保横向为21cm。
        3. 调整打印清晰度为最高进行打印。
        4. 将你的光栅卡与条纹对齐，找到色差最小的条带，对应数值即为打印机的校准LPI。

- **问：需要提前统一图像大小吗？**
- **答**：一般不需要，如果导入的图像大小不相同，程序将以第一张图像为准自动调整其他图像的尺寸。

- **问：为什么预览图看起来有点模糊？**
- **答**：这是正常的。预览区显示的是实际图像的缩略图的处理结果，因此会损失一些清晰度。最终保存的文件是全分辨率的。

- **问：我应该如何选择“切片宽度”？**
- **答**：这是一个经验值。通常，`2`到`6`像素是比较常用的范围。较小的值理论上效果更精细，但也更考验打印机的精度。您可以尝试用不同的值生成小尺寸的测试图来观察效果。

